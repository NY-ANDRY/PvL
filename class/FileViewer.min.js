export default class FileViewer{constructor(t,e,i){this.spacefileOutput=document.getElementById(t),this.fileOutput=document.getElementById(e),this.spacefileOutputClose=document.getElementById(i),this.txtExt=["md","sql","txt","html","css","php","js","json","log","lock","htaccess"],this.imgExt=["png","jpg","jpeg","gif","ico","svg"],this.videoExt=["mp4","mp3"],this.spacefileOutputClose.addEventListener("click",()=>{this.hideFile()})}addTxtExt(t){this.txtExt.push(t)}addImgExt(t){this.imgExt.push(t)}addVideoExt(t){this.videoExt.push(t)}showFile(){this.spacefileOutput.style.display="flex"}hideFile(){this.fileOutput.innerHTML="",this.spacefileOutput.style.display="none"}getExt(t){t=t.split(".");return t[t.length-1]}basename(t){return t.split("/").pop()}readFile(e){var t=this.getExt(e);this.txtExt.includes(t)?fetch(e).then(t=>t.text()).then(t=>{this.putText(this.basename(e),t),this.showFile()}).catch(t=>{console.error("Erreur :",t)}):this.imgExt.includes(t)?(this.putImg(this.basename(e),e),this.showFile()):this.videoExt.includes(t)?(this.putVideo(this.basename(e),e),this.showFile()):alert("impossible de lire ce fichier")}putText(t,e){this.fileOutput.innerHTML="";var i=document.createElement("pre"),s=document.createElement("div");s.classList.add("space-file-head"),s.textContent=t,i.textContent=e,this.fileOutput.appendChild(s),this.fileOutput.appendChild(i)}putImg(t,e){this.fileOutput.innerHTML="";var i=document.createElement("div"),t=(i.classList.add("space-file-head"),i.textContent=t,this.fileOutput.appendChild(i),document.createElement("img"));t.classList.add("space-file-img"),t.src=e,this.fileOutput.appendChild(t)}putVideo(t,e){this.fileOutput.innerHTML="";var i=document.createElement("div"),t=(i.classList.add("space-file-head"),i.textContent=t,this.fileOutput.appendChild(i),document.createElement("video"));t.setAttribute("controls",!0),t.setAttribute("autoplay",!0),t.setAttribute("type","video/mp4"),t.classList.add("space-file-video"),t.src=e,this.fileOutput.appendChild(t)}}