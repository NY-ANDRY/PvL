export default class FileListner{constructor(e,t,i){this.selfName="list-info",this.filesLocation=e,this.itemsName=t,this.infoSpaceId=i,this.infoSpace=document.getElementById(i),this.listeners=new Map,this.closeBox=!1,this.timeout=null,this.pathArgsName="path"}init(){this.removeAllListeners(),this.items=document.getElementsByClassName(this.itemsName),0===this.items.length?console.error("No items found with class name:",this.itemsName):Array.from(this.items).forEach(c=>{var e=async()=>{this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.closeBox=!1,this.infoSpace.style.display="flex";var e=c.getAttribute("link"),e=await this.getInfo(e),t=document.createElement("label"),i=(t.innerText="Name:",document.createElement("span")),n=(i.innerText=e.name,document.createElement("label")),s=(n.innerText="Parent:",document.createElement("span")),a=(s.innerText=e.parent,document.createElement("label")),o=(a.innerText="Size:",document.createElement("span")),l=(o.innerText=e.size,document.createElement("label")),r=(l.innerText="Last Modified:",document.createElement("span")),h=(r.innerText=e.lastModified,document.createElement("label")),m=(h.innerText="Creation:",document.createElement("span"));m.innerText=e.creation,this.infoSpace.innerHTML="",this.infoSpace.appendChild(t),this.infoSpace.appendChild(i),this.infoSpace.appendChild(n),this.infoSpace.appendChild(s),this.infoSpace.appendChild(a),this.infoSpace.appendChild(o),this.infoSpace.appendChild(l),this.infoSpace.appendChild(r),this.infoSpace.appendChild(h),this.infoSpace.appendChild(m)},t=()=>{this.closeBox=!0,this.timeout=setTimeout(()=>{this.closeBox&&(this.infoSpace.innerHTML="",this.infoSpace.style.display="none")},400)};c.addEventListener("mouseenter",e),c.addEventListener("mouseleave",t),this.listeners.set(c,{mouseenter:e,mouseleave:t})})}removeAllListeners(){this.listeners&&(this.listeners.forEach((e,t)=>{t.removeEventListener("mouseenter",e.mouseenter),t.removeEventListener("mouseleave",e.mouseleave)}),this.listeners.clear())}async getInfo(e){return await(await fetch(this.filesLocation+"?"+this.pathArgsName+"="+e)).json()}setPathArgsName(e){this.pathArgsName=e}}
